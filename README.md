# city_parking_assistant

智慧城市停车引导与车位共享平台（前端：Vue 2 + TypeScript + Tailwind CSS）。提供车位实时展示、共享车位发布与预约、智能推荐与导航的界面能力。

## 已完成界面

### 用户端
- **登录页**：突出项目卖点（实时车位、共享经济、智能推荐），表单含账号/密码、验证码、记住我（自动登录）、忘记密码与注册入口，深色玻璃风格。
- **注册页**：支持邮箱、密码确认与手机号可选，提交后跳转登录。
- **忘记密码页**：支持邮箱 + 新密码重置（演示流程，可接入邮件验证）。
- **用户主页面**：车位列表展示、搜索筛选（按类型、距离、价格、空闲数排序）、地图视图切换、统计信息卡片（附近停车场数、总空闲车位、平均价格、最近距离）、车位状态标识（充足/紧张/已满）。
- **共享车位发布页**：发布共享车位表单，包含基本信息（车位名称、地址、总车位数、空闲车位数、类型、大小）、价格信息（每小时/每日价格）、可用时间（时间段、可用日期）、联系方式、备注说明，提交后系统自动发布，无需人工审核。页面包含发布流程说明和注意事项，帮助用户了解发布流程和填写要求。
- **车位详情/预约页（弹窗）**：以弹窗形式展示停车场详细信息（基本信息、地图预览、距离、价格、类型）、共享车位详细信息、预约表单（日期、时间、停车时长、费用计算）、导航功能、举报问题功能。用户在主页面点击"查看详情"或"立即预约"按钮时，会在当前页面弹出详情窗口，无需跳转页面。**注意：只有共享车位可以预约，公共停车场不支持预约功能。**
- **个人中心**：我的预约（预约列表、状态管理、取消预约、导航）、我的共享车位（发布列表、审核状态、收益统计、编辑/启用/暂停/删除）、停车历史记录（停放时间、停车地点、价格、路线信息、查看路线、再次导航）、标签页切换。
- **添加停车历史记录页**：用户可手动添加停车历史记录，包含停车场名称、地址、开始/结束时间、费用、路线信息等，支持自动计算停车时长，提交后保存到本地存储并跳转回个人中心。

### 管理员后台
- **管理员登录页**：支持管理员账号、口令、验证码登录，记住我功能，登录成功后跳转后台。
- **数据概览**：展示总停车场数、总车位数、占用率、待审核共享车位等统计卡片，快速操作入口，最近活动记录。
- **停车场管理**：停车场列表（搜索、筛选），添加/编辑/删除停车场，显示总车位数、空闲车位、状态等。
- **车位实时状态**：实时监控所有停车场车位占用情况，车位分布预览，占用率进度条，支持手动刷新和自动刷新（30秒）。
- **共享车位审核**：审核用户提交的共享车位申请，支持通过/拒绝操作，筛选待审核/已通过/已拒绝状态。
- **用户举报管理**：处理用户举报（虚假信息、价格欺诈、服务问题等），查看详情、标记已处理、删除举报。
- **数据报表**：每日停车流量、热门时段统计、车位使用率趋势、停车场使用排行等数据可视化（简单图表展示）。

## 快速开始
```bash
npm install
npm run serve
```

访问地址：
- 用户登录：http://localhost:8080/
- 用户主页面：http://localhost:8080/home
- 发布共享车位：http://localhost:8080/home/publish
- 个人中心：http://localhost:8080/home/center
- 添加停车历史记录：http://localhost:8080/home/add-history
- 管理员登录：http://localhost:8080/admin
- 管理员后台：http://localhost:8080/admin/dashboard

## 生产构建
```bash
npm run build
```

## 代码质量
```bash
npm run lint
```

## API 文档

详细的 API 接口文档请查看：[API_DOCUMENTATION.md](./API_DOCUMENTATION.md)

API 文档包含：
- 用户认证模块（登录、注册、重置密码）
- 停车场模块（列表、详情、预约）**注意：预约功能仅限共享车位**
- 共享车位模块（发布、管理、审核）
- 个人中心模块（预约管理）
- 管理员模块（数据概览、停车场管理、审核、举报处理）
- 数据统计模块

所有接口均包含详细的请求参数、响应示例和错误码说明。

## 组件说明

### ParkingCard（停车场卡片组件）
- **位置**：`src/components/ParkingCard.vue`
- **功能**：展示停车场基本信息卡片
- **使用方式**：
  ```vue
  <ParkingCard
    :parking="parkingLot"
    :default-image="defaultImage"
    @card-click="handleCardClick"
    @detail-click="handleDetailClick"
    @reserve-click="handleReserveClick"
  />
  ```
- **Props**：
  - `parking` (Object): 停车场数据对象（ParkingLotVO）
  - `defaultImage` (String): 默认图片路径，当停车场没有图片URL时使用
  - `buttonLoading` (Boolean): 按钮加载状态
- **Events**：
  - `card-click`: 点击卡片时触发
  - `detail-click`: 点击"查看详情"按钮时触发
  - `reserve-click`: 点击"立即预约"按钮时触发
- **特点**：
  - 自动处理图片加载失败，使用默认图片
  - 显示停车场状态（充足/紧张/已满）
  - 区分公共停车场和共享车位

### ParkingDetailModal（停车场详情弹窗组件）
- **位置**：`src/components/ParkingDetailModal.vue`
- **功能**：以弹窗形式展示停车场详情和预约流程
- **使用方式**：
  ```vue
  <ParkingDetailModal
    :visible="showDetailModal"
    :parking-lot="selectedParkingLot"
    @close="closeDetailModal"
  />
  ```
- **Props**：
  - `visible` (Boolean): 控制弹窗显示/隐藏
  - `parkingLot` (Object): 停车场数据对象
- **Events**：
  - `close`: 关闭弹窗时触发
- **特点**：
  - 响应式设计，适配移动端和桌面端
  - 支持三步预约流程：信息查看 → 填写预约 → 确认信息
  - 自动计算预计费用
  - 支持点击遮罩层关闭弹窗
  - **预约限制**：只有共享车位（type === 'shared'）可以预约，公共停车场（type === 'public'）不支持预约功能，系统会自动验证并提示用户
  - **默认图片**：当停车场没有图片URL时，自动使用默认图片（`src/assets/OIP.webp`）
  - **举报功能**：使用 Element UI 对话框提供友好的举报界面，支持选择举报类型（虚假信息、价格欺诈、服务问题、安全隐患、其他问题）、填写问题描述和联系方式，包含完整的表单验证

## 默认图片说明

当停车场数据中没有返回图片URL（`img` 字段为空或未提供）时，系统会自动使用默认图片：
- **默认图片路径**：`src/assets/OIP.webp`
- **使用场景**：
  - 停车场列表卡片（ParkingCard 组件）
  - 停车场详情弹窗（ParkingDetailModal 组件）
- **实现方式**：使用 Vue 的 `require()` 动态导入本地图片资源，确保图片在构建时被正确打包

## 后续可扩展
- 接入真实登录/注册接口与角色区分。
- 车位共享发布、预约与支付流程。
- 使用 ECharts 实现更丰富的数据可视化（车位利用率、峰值时段等）。
- 接入后端 API，实现真实的数据交互。
- 地址转坐标（地理编码）功能，自动获取停车场坐标。
